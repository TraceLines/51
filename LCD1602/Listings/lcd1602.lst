C51 COMPILER V9.60.0.0   LCD1602                                                           10/25/2022 08:38:10 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\lcd1602.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Bsp\LCD1602\lcd1602.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\User;.\Bsp\LCD16
                    -02;.\Public) DEBUG OBJECTEXTEND PRINT(.\Listings\lcd1602.lst) TABS(2) OBJECT(.\Objects\lcd1602.obj)

line level    source

   1          /*
   2           * @Author: king jing
   3           * @Date: 2022-10-24 12:11:57
   4           * @LastEditTime: 2022-10-24 16:42:18
   5           * @Description: Do not edit
   6           */
   7          #include "reg52.h"
   8          
   9          // å…¬ç”¨åŠŸèƒ½åº“å¼•å…¥
  10          
  11          #include "Public.h"
  12          
  13          sbit LCD_EN = P2 ^ 7;
  14          sbit LCD_RS = P2 ^ 6;
  15          sbit LCD_WR = P2 ^ 5;
  16          
  17          #define LCD_PORT P0
  18          
  19          void LCD_WriteCommand(u8 Command)
  20          {
  21   1        LCD_RS = 0;
  22   1        LCD_WR = 0;
  23   1        LCD_PORT = Command;
  24   1        LCD_EN = 1;
  25   1        // è¿˜éœ€è¦æ‹‰ä½ŽENï¼Œä»¥é‡Šæ”¾ä½¿èƒ½ï¼Œä¸ºä¸‹æ¬¡ä½¿ç”¨å‡†å¤‡ã€‚
  26   1        Delay1ms();
  27   1        LCD_EN = 0;
  28   1        Delay1ms();
  29   1      }
  30          void LCD_WriteData(u8 Data)
  31          {
  32   1        LCD_RS = 1;
  33   1        LCD_WR = 0;
  34   1        LCD_PORT = Data;
  35   1        LCD_EN = 1;
  36   1        Delay1ms();
  37   1        LCD_EN = 0;
  38   1        Delay1ms();
  39   1      }
  40          /**
  41           * @description: LCDåŠŸèƒ½çš„åˆå§‹åŒ–
  42           * @return {*}
  43           */
  44          void LCD_init()
  45          {
  46   1        //
  47   1        LCD_WriteCommand(0x38); // 8ä½æ•°æ®æŽ¥å£ï¼Œä¸¤è¡Œæ˜¾ç¤º 5*7ç‚¹é˜µ
  48   1        LCD_WriteCommand(0x0c); //æ˜¾ç¤ºå¼€ï¼Œå…‰æ ‡å…³ï¼Œé—ªçƒå…³
  49   1        LCD_WriteCommand(0x06); //æ•°æ®è¯»å†™æ“ä½œåŽï¼Œå…‰æ ‡è‡ªåŠ¨åŠ 1ï¼Œç”»ç‰‡ä¸ç§»åŠ¨
  50   1        LCD_WriteCommand(0x01); //æ¸…å±
  51   1      }
  52          
  53          /**
  54           * @description:
C51 COMPILER V9.60.0.0   LCD1602                                                           10/25/2022 08:38:10 PAGE 2   

  55           * 1ã€è®¾ç½®å…‰æ ‡ä½ç½®ï¼Œæ ‡æ³¨ä»Žå“ªé‡Œå¼€å§‹å†™ï¼Œå°†ç»™çš„è¡Œåˆ—å·ï¼Œè½¬æ¢ä¸ºLCDå†…éƒ¨çš„å¯¹åº”çš„
             -DDRAMä¸­çš„åœ°å€ã€‚
  56           * 2ã€æ•°æ®æ˜¾ç¤ºåŒºï¼šLCDæŽ§åˆ¶å™¨å†…éƒ¨å¸¦æœ‰80x8çš„RAMç¼“å†²åŒºï¼Œå¯¹åº”å…³ç³»è§æ‰‹å†Œä¸­çš„å›¾ï¼Œè€
             -ŒLCDçš„ä¸€ä¸ªæ˜¾ç¤ºä½ï¼Œå¯¹åº”ä¸€ä¸ªDDRAMä¸­çš„åœ°å€é‡Œçš„å€¼ï¼Œå›¾ä¸­çš„åœ°å€æ˜¯å®žé™…åœ°å€ï¼Œéœ€è¦æˆ–ä¸Š0x80ä»£è¡
             -¨æ“ä½œDDRAMçš„å‘½ä»¤ï¼Œä»¥è¾¾æˆæ­£ç¡®çš„å€ã€‚
  57           * 3ã€ä¸ºä½•ä¸ç”¨æ¯æ¬¡éƒ½æ“ä½œå…‰æ ‡ï¼Œå³å†™å®Œä¸€ä¸ªåŽï¼Œä¸ç”¨æ¯æ¬¡éƒ½åŽ»ç§»åŠ¨ä¸€ä¸‹å…‰æ ‡ï¼Œå› 
             -ä¸ºåˆå§‹åŒ–æ—¶LCD_WriteCommand(0x06);ï¼Œå·²ç»è®¾ç½®äº†è¯»å†™åŽï¼ŒACè‡ªåŠ¨åŠ 1ï¼Œä¸”ä¸ç§»åŠ¨ç”»é¢ã€‚
  58           * 4ã€åªæœ‰åœ¨éœ€è¦è®¾ç½®èµ·å§‹ä½ç½®æ—¶ï¼Œæ‰éœ€è¦è°ƒç”¨æ¬¡å‡½æ•°ï¼ŒåŽç»­ä¼šåœ¨è¯»å†™åŽè‡ªåŠ¨ç§»åŠ¨
             -å…‰æ ‡ä½ç½®
  59           * @param {u8} Line
  60           * @param {u8} Column
  61           * @return {*}
  62           */
  63          void LCD_SetCursor(u8 Line, u8 Column)
  64          {
  65   1        if (Line == 1)
  66   1        {
  67   2      
  68   2          LCD_WriteCommand(0x80 | (Column - 1));
  69   2        }
  70   1        else
  71   1        {
  72   2          LCD_WriteCommand(0x80 | (0x3f + Column));
  73   2        }
  74   1      }
  75          /**
  76           * @description:å•ä¸ªå­—ç¬¦çš„æ˜¾ç¤º
  77           * @return {*}
  78           */
  79          void LCD_ShowChar(u8 Line, u8 Column, u8 charts)
  80          {
  81   1        LCD_SetCursor(Line, Column);
  82   1        LCD_WriteData(charts);
  83   1      }
  84          
  85          /**
  86           * @description: stingçš„æ˜¾ç¤º
  87           * @param {u8} Line
  88           * @param {u8} Column
  89           * @param {u8} *Strings
  90           * @return {*}
  91           */
  92          void LCD_ShowString(u8 Line, u8 Column, u8 *Strings)
  93          {
  94   1        u16 i = 0;
  95   1        LCD_SetCursor(Line, Column);
  96   1        while (Strings[i] != '\0')
  97   1        {
  98   2          LCD_WriteData(Strings[i]);
  99   2          i++;
 100   2        }
 101   1      }
 102          
 103          /**
 104           * @description: æ— ç¬¦å·æ•°å­—æ˜¾ç¤º
 105           * @param {u8} Line
 106           * @param {u8} Column
 107           * @param {u16} nums
 108           * @param {u8} length
 109           * @return {*}
 110           */
 111          void LCD_ShowNum(u8 Line, u8 Column, u16 nums, u8 length)
C51 COMPILER V9.60.0.0   LCD1602                                                           10/25/2022 08:38:10 PAGE 3   

 112          {
 113   1        u16 i = 0;
 114   1        LCD_SetCursor(Line, Column);
 115   1        for (i = length; i > 0; i--)
 116   1        {
 117   2          LCD_WriteData('0' + nums / math_power(10, i - 1) % 10);
 118   2        }
 119   1      }
 120          
 121          /**
 122           * @description: åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹ä»¥æœ‰ç¬¦å·åè¿›åˆ¶æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 123           * @param  Line èµ·å§‹è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
 124           * @param  Column èµ·å§‹åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
 125           * @param  Number è¦æ˜¾ç¤ºçš„æ•°å­—ï¼ŒèŒƒå›´ï¼š-32768~32767
 126           * @param  Length è¦æ˜¾ç¤ºæ•°å­—çš„é•¿åº¦ï¼ŒèŒƒå›´ï¼š1~5
 127           * @return {*}å…ƒ
 128           */
 129          /**
 130           * @description: åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹ä»¥æœ‰ç¬¦å·åè¿›åˆ¶æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 131           * @param {u8} Line èµ·å§‹è¡Œä½ç½®ï¼ŒèŒƒå›´ï¼š1~2
 132           * @param {u8} Column å§‹åˆ—ä½ç½®ï¼ŒèŒƒå›´ï¼š1~16
 133           * @param {int} nums è¦æ˜¾ç¤ºçš„æ•°å­—ï¼ŒèŒƒå›´ï¼š-32768~32767ï¼Œ
 134           * @param {u8} length
 135           * @return {*}
 136           */
 137          void LCD_ShowSignedNums(u8 Line, u8 Column, int nums, u8 length)
 138          {
 139   1        u8 i;
 140   1        u16 Number;
 141   1        LCD_SetCursor(Line, Column);
 142   1      
 143   1        if (nums >= 0)
 144   1        {
 145   2          LCD_WriteData('+');
 146   2          Number = nums;
 147   2        }
 148   1        else
 149   1        {
 150   2          LCD_WriteData('-');
 151   2          Number = -nums;
 152   2        }
 153   1        for (i = length; i > 0; i--)
 154   1        {
 155   2          LCD_WriteData('0' + Number / math_power(10, i - 1) % 10);
 156   2        }
 157   1      }
 158          
 159          /**
 160           * @description: åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹ä»¥åå…­è¿›åˆ¶æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 161           * @param {unsigned char} Line
 162           * @param {unsigned char} Column
 163           * @param {unsigned int} Number
 164           * @param {unsigned char} Length
 165           * @return {*}
 166           */
 167          void LCD_ShowHexNum(unsigned char Line, unsigned char Column, unsigned int Number, unsigned char Length)
 168          {
 169   1        unsigned char i;
 170   1        unsigned char SingleNumber;
 171   1        LCD_SetCursor(Line, Column);
 172   1        for (i = Length; i > 0; i--)
 173   1        {
C51 COMPILER V9.60.0.0   LCD1602                                                           10/25/2022 08:38:10 PAGE 4   

 174   2          SingleNumber = Number / math_power(16, i - 1) % 16;
 175   2          if (SingleNumber < 10)
 176   2          {
 177   3            LCD_WriteData('0' + SingleNumber);
 178   3          }
 179   2          else
 180   2          {
 181   3            LCD_WriteData('A' + SingleNumber - 10);
 182   3          }
 183   2        }
 184   1      }
 185          
 186          /**
 187           * @description:åœ¨LCD1602æŒ‡å®šä½ç½®å¼€å§‹ä»¥äºŒè¿›åˆ¶æ˜¾ç¤ºæ‰€ç»™æ•°å­—
 188           * @param {unsigned char} Line
 189           * @param {unsigned char} Column
 190           * @param {unsigned int} Number
 191           * @param {unsigned char} Length
 192           * @return {*}æ— 
 193           */
 194          void LCD_ShowBinNum(unsigned char Line, unsigned char Column, unsigned int Number, unsigned char Length)
 195          {
 196   1        unsigned char i;
 197   1        LCD_SetCursor(Line, Column);
 198   1        for (i = Length; i > 0; i--)
 199   1        {
 200   2          LCD_WriteData('0' + Number / math_power(2, i - 1) % 2);
 201   2        }
 202   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    418    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      35
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
